import random

# Имя файла для сохранения истории
FILE_NAME = "quest_history.txt"

def write_to_file(mode, content):
    """Функция для записи данных в файл."""
    with open(FILE_NAME, mode) as file:
        file.write(content + "\n")

def read_history():
    """Чтение истории приключений."""
    try:
        with open(FILE_NAME, "r") as file:
            print("История приключений:")
            print(file.read())
    except FileNotFoundError:
        print("История отсутствует. Сыграйте, чтобы создать новую запись!")

def play_game():
    """Логика игры."""
    print("Добро пожаловать в игру 'Квест: Найди сокровище'!")
    print("Вы — искатель приключений, и ваша цель — найти сокровище.")
    print("На каждом этапе вам придется делать выбор, который повлияет на исход игры.")
    
    score = 0
    write_to_file("a", "=== Новое приключение ===")
    
    # Уровень 1: Выбор пути
    print("\nУровень 1: Вы на развилке.")
    print("1. Пойти направо в темный лес.")
    print("2. Пойти налево к реке.")
    choice1 = input("Ваш выбор: ")
    
    if choice1 == "1":
        print("Вы вошли в темный лес и нашли сундук с золотом! +50 очков.")
        score += 50
        write_to_file("a", "Уровень 1: Выбрали лес. Найден сундук с золотом! +50 очков.")
    elif choice1 == "2":
        print("Вы подошли к реке, но мост разрушен. Ничего не найдено.")
        write_to_file("a", "Уровень 1: Выбрали реку. Ничего не найдено.")
    else:
        print("Вы стояли слишком долго, и ночь настигла вас. -10 очков.")
        score -= 10
        write_to_file("a", "Уровень 1: Ничего не выбрано. Потеря очков.")
    
    # Уровень 2: Враг
    print("\nУровень 2: На вашем пути появляется враг!")
    print("1. Сразиться с врагом.")
    print("2. Убежать.")
    choice2 = input("Ваш выбор: ")
    
    if choice2 == "1":
        if random.choice([True, False]):
            print("Вы победили врага! +30 очков.")
            score += 30
            write_to_file("a", "Уровень 2: Победа над врагом! +30 очков.")
        else:
            print("Вы проиграли врагу. -20 очков.")
            score -= 20
            write_to_file("a", "Уровень 2: Проигрыш врагу. -20 очков.")
    elif choice2 == "2":
        print("Вы убежали, но потеряли немного времени. -10 очков.")
        score -= 10
        write_to_file("a", "Уровень 2: Убежали от врага. -10 очков.")
    else:
        print("Вы ничего не сделали, и враг обошел вас стороной.")
        write_to_file("a", "Уровень 2: Никакого действия. 0 очков.")
    
    # Уровень 3: Сокровище
    print("\nУровень 3: Вы нашли пещеру с сокровищем!")
    print("1. Войти в пещеру.")
    print("2. Пройти мимо.")
    choice3 = input("Ваш выбор: ")
    
    if choice3 == "1":
        print("Вы вошли в пещеру и нашли древний артефакт! +100 очков.")
        score += 100
        write_to_file("a", "Уровень 3: Вошли в пещеру. Найден древний артефакт! +100 очков.")
    elif choice3 == "2":
        print("Вы прошли мимо, боясь ловушки. Ничего не найдено.")
        write_to_file("a", "Уровень 3: Прошли мимо пещеры. Ничего не найдено.")
    else:
        print("Вы стояли слишком долго, и пещера обрушилась. -50 очков.")
        score -= 50
        write_to_file("a", "Уровень 3: Никакого действия. Потеря очков.")
        
    # Итог
    print(f"\nВаш результат: {score} очков.")
    write_to_file("a", f"Итоговый результат: {score} очков.")
    write_to_file("a", "==========================")

def main():
    """Главное меню."""
    while True:
        print("\nВыберите действие:")
        print("1. Начать приключение")
        print("2. Посмотреть историю приключений")
        print("3. Сбросить историю")
        print("4. Выйти")
        
        choice = input("Ваш выбор: ")

        if choice == "1":
            play_game()
        elif choice == "2":
            read_history()
        elif choice == "3":
            with open(FILE_NAME, "w") as file:
                pass  # Очистка файла
            print("История приключений сброшена.")
        elif choice == "4":
            print("До встречи, искатель приключений!")
            break
        else:
            print("Некорректный выбор. Попробуйте снова.")

if __name__ == "__main__":
    main()
