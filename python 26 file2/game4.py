

import random

# Имя файла для сохранения истории
FILE_NAME = "space_adventure_history.txt"

def write_to_file(mode, content):
    """Функция для записи данных в файл."""
    with open(FILE_NAME, mode) as file:
        file.write(content + "\n")

def read_history():
    """Чтение истории приключений."""
    try:
        with open(FILE_NAME, "r") as file:
            print("История приключений:")
            print(file.read())
    except FileNotFoundError:
        print("История отсутствует. Сыграйте, чтобы создать новую запись!")

def play_game():
    """Логика игры."""
    print("Добро пожаловать в игру 'Космическое приключение'!")
    print("Вы — капитан космического корабля, и ваша миссия — доставить свою команду на новую планету.")
    print("Каждое ваше решение повлияет на успех миссии.")
    
    score = 0
    write_to_file("a", "=== Новая миссия ===")
    
    # Уровень 1: Выбор маршрута
    print("\nУровень 1: Вы у входа в астероидное поле.")
    print("1. Пролететь сквозь астероиды (быстро, но опасно).")
    print("2. Облететь астероидное поле (медленно, но безопасно).")
    choice1 = input("Ваш выбор: ")
    
    if choice1 == "1":
        if random.choice([True, False]):
            print("Вы успешно пролетели через астероиды! +50 очков.")
            score += 50
            write_to_file("a", "Уровень 1: Пролет через астероиды. Успех! +50 очков.")
        else:
            print("Ваш корабль получил повреждения. -20 очков.")
            score -= 20
            write_to_file("a", "Уровень 1: Пролет через астероиды. Повреждения! -20 очков.")
    elif choice1 == "2":
        print("Вы облетели астероидное поле. Это заняло время, но команда в безопасности. +30 очков.")
        score += 30
        write_to_file("a", "Уровень 1: Облет астероидного поля. +30 очков.")
    else:
        print("Вы не сделали выбор, и ваш корабль заблудился. -10 очков.")
        score -= 10
        write_to_file("a", "Уровень 1: Нет действия. Потеря очков.")
    
    # Уровень 2: Аварийная ситуация
    print("\nУровень 2: На корабле случилась авария.")
    print("1. Починить корабль своими силами.")
    print("2. Запросить помощь у союзного флота.")
    choice2 = input("Ваш выбор: ")
    
    if choice2 == "1":
        if random.choice([True, False]):
            print("Вы успешно устранили аварию! +40 очков.")
            score += 40
            write_to_file("a", "Уровень 2: Ремонт своими силами. Успех! +40 очков.")
        else:
            print("Ремонт провалился, ситуация ухудшилась. -30 очков.")
            score -= 30
            write_to_file("a", "Уровень 2: Ремонт своими силами. Провал. -30 очков.")
    elif choice2 == "2":
        print("Союзный флот прибыл на помощь, но это заняло время. +20 очков.")
        score += 20
        write_to_file("a", "Уровень 2: Запрос помощи. +20 очков.")
    else:
        print("Вы ничего не сделали, и авария привела к потере ресурсов. -40 очков.")
        score -= 40
        write_to_file("a", "Уровень 2: Нет действия. Потеря ресурсов.")
    
    # Уровень 3: Высадка на планету
    print("\nУровень 3: Вы достигли новой планеты.")
    print("1. Высадиться немедленно.")
    print("2. Провести разведку перед высадкой.")
    choice3 = input("Ваш выбор: ")
    
    if choice3 == "1":
        if random.choice([True, False]):
            print("Вы успешно высадились и обнаружили пригодные для жизни территории! +100 очков.")
            score += 100
            write_to_file("a", "Уровень 3: Немедленная высадка. Успех! +100 очков.")
        else:
            print("На поверхности оказались опасные условия. -50 очков.")
            score -= 50
            write_to_file("a", "Уровень 3: Немедленная высадка. Опасность! -50 очков.")
    elif choice3 == "2":
        print("Разведка выявила лучшие места для высадки. Вы успешно выполнили миссию! +70 очков.")
        score += 70
        write_to_file("a", "Уровень 3: Разведка перед высадкой. Успех! +70 очков.")
    else:
        print("Вы промедлили, и планета оказалась занята другой цивилизацией. -30 очков.")
        score -= 30
        write_to_file("a", "Уровень 3: Промедление. Планета потеряна.")
    
    # Итог
    print(f"\nВаш результат: {score} очков.")
    write_to_file("a", f"Итоговый результат: {score} очков.")
    write_to_file("a", "==========================")

def main():
    """Главное меню."""
    while True:
        print("\nВыберите действие:")
        print("1. Начать миссию")
        print("2. Посмотреть историю миссий")
        print("3. Сбросить историю")
        print("4. Выйти")
        
        choice = input("Ваш выбор: ")

        if choice == "1":
            play_game()
        elif choice == "2":
            read_history()
        elif choice == "3":
            with open(FILE_NAME, "w") as file:
                pass  # Очистка файла
            print("История миссий сброшена.")
        elif choice == "4":
            print("До встречи, капитан!")
            break
        else:
            print("Некорректный выбор. Попробуйте снова.")

if __name__ == "__main__":
    main()
